# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Введение

Перед выполнением задания вы можете ознакомиться с 
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/master/additional/README.md).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
> Для этого сценария можно использовать тип БД `NoSQL:Документо-ориентированная`, `Реляционная` или `Объектно-ориентированныя`
> Электронные чеки, как правило, имеют определенный требованиями набор полей. JSON структура может быть быстро и экономично десериализована и подготовлена для хранения необходимой структуре.
> 
- Склады и автомобильные дороги для логистической компании
> Для этого сценария можно использовать NoSQL типы БД `Сетевая`, `Иерархическая` с множеством узлов или `Графовая`
> Консистентность наборов данных этого сценария сложно поддерживать с помощью реляционных и объектно-ориентированных бд. Организация динамической структура данных хорошо реализуется с помощью NoSQL БД
>  
- Генеалогические деревья
> Для этого сценария можно использовать тип БД `NoSQL:Иерархическая` - деревья с одним родителем
> Структура данных этого сценария характеризуется наличием отношений предок-последователь. Реализация с помощью принципов Иерархии кажется логичной.
> 
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
> Для этого сценария можно использовать тип БД `NoSQL:Ключ-значение`
> Структура Кэша требует быстрого извлечения записи из массивов, что собственно и реализуется одноименным типом БД.
> 
- Отношения клиент-покупка для интернет-магазина
> Для этого сценария можно использовать тип БД `Реляционная`
> Структуры данных для этого сценария успешно реализуются созданием реляционных связей. Изменение структуры и состава наборов  всвязи с изменением бизнес-требований согласуется с временной шкалой релизного цикла. Анализ и обработка данных для этого сценария не требует повышенных требований к скорости получения данных.
> 


## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)
> **Распределенное приложение PA** обеспечена доступность и устойчивость к разделению в ущерб согласованности. Если возникнет разделение, все узлы останутся доступными, однако часть узлов могут возвращать не актуальную версию данных. (После устранения разделения базы данных AP выполняют синхронизацию всех узлов, чтобы восстановить согласованность системы).
>
- При сетевых сбоях, система может разделиться на 2 раздельных кластера
> **Распределенное приложение PC** обеспечивает согласованность и устойчивость к разделению в ущерб доступности. Если возникает разделение между двумя узлами, то система вынуждена завершить работу несогласованного узла (сделать его недоступным) до тех пор, пока разделение не будет устранено.
>
- Система может не прислать корректный ответ или сбросить соединение
> **Распределенное приложение CA** - отсутствует устойчивость к разделению, т.е. при потере состояния доступности всех узлов система не может обеспечить согласованность;
>

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?
```
if (Partitioning) then Availability or Consistency
Else Latency or Consistency
```
> Система-01: PA-EL (При наличии сетевого разделения системы обеспечивается доступность, иначе - обеспечивается высокая скорость ответа);
 
> Система-02: PA-EC (При наличии сетевого разделения системы обеспечивается доступность, иначе - обеспечивается консистентность);

> Система-03: PC-EC (При наличии сетевого разделения системы обеспечивается консистентность, иначе - также обеспечивается консистентность).


## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?
> Принципы BASE и ACID являются следствием CAP теоремы: "ни один проект не может одновременно удовлетворять трем характеристикам согласованности, доступности и отказоустойчивости разделения" и описывают разные состояния: ACID - модели CA, CP; BASE - модель AP.
> В зависимости от реализации система может быть построена или по принципам ACID, или по принципам BASE.

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?
> Система Redis.
> Минусы системы:
> - долгое время восстановления данных с диска после падения;
> - высокие требования к объему оперативной памяти;
> - отсутствие поддержки  синтаксиса SQL.

---

### Как cдавать задание

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
